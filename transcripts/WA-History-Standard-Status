/*

Summary

• Pulls a full list of currently enrolled WA students, with the status of the "History Standard" custom demographic field.
• Sorted by Site, grade level, and student ID.

Level of Detail
• student

Note:
• This field should be set to "MET" or "NOT_MET" by an OM when a new student submits a cume folder, according to the status of WA State History on a student's transcript.
• The other update of this field will be periodic mass updates of students who passed the 3 WA History Challenge Focus Areas on the Platform. This is managed by Data & Ops by sending a list of "MET" students to Illuminate Help.

 */

SELECT sites.site_name, students.local_student_id, students.last_name, students.first_name,  (matviews.ss_current.grade_level_id -1) AS grade, student_custom_fields_data.custom_field_washington_state_history AS WA_Hist_Status
FROM matviews.ss_current
LEFT JOIN students on matviews.ss_current.student_id = students.student_id
LEFT JOIN sites on matviews.ss_current.site_id = sites.site_id
LEFT JOIN student_custom_fields_data on matviews.ss_current.student_id = student_custom_fields_data.student_id
WHERE sites.site_id <> 9999999
ORDER BY site_name, grade, local_student_id;
